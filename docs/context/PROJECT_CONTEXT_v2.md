FYPFixer ‚Äì Project Context Snapshot v2 (2025‚Äë12‚Äë07, 13:55 MSK)
1. Purpose & Vision (Updated)
–ò–¥–µ—è (—ç–≤–æ–ª—é—Ü–∏—è):

v1 (–∏—Å—Ö–æ–¥–Ω–∞—è): FYPFixer –ø–æ–º–æ–≥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é "–ø—Ä–∏—Ä—É—á–∏—Ç—å" TikTok‚Äë–ª–µ–Ω—Ç—É —á–µ—Ä–µ–∑ —á–µ–∫‚Äë–ª–∏—Å—Ç—ã —Å–æ–≤–µ—Ç–æ–≤.

v2 (—Ç–µ–∫—É—â–∞—è, –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è): FYPFixer ‚Äî —ç—Ç–æ AI‚Äë–ø–æ–º–æ—â–Ω–∏–∫, –∫–æ—Ç–æ—Ä—ã–π –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è —Å –≥–æ—Ç–æ–≤—ã–º–∏ —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ –≤–∏–¥–µ–æ. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ç–æ–ª—å–∫–æ –∂–º—ë—Ç –∫–Ω–æ–ø–∫–∏; FYPFixer ‚Äî –º–æ–∑–≥, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Äî —Ä—É–∫–∏.

–ú–∏—Å—Å–∏—è:

Give users simple, AI-powered daily checklists with concrete TikTok video links. No searching, no thinking ‚Äî just tap and watch. Train your FYP in 10 minutes a day.

–í–∏–¥–µ–Ω–∏–µ:

–°—Ç–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–º "—É–ø—Ä–∞–≤–ª—è–µ–º–æ–≥–æ FYP" –Ω–∞ TikTok (–ø–æ–∑–∂–µ ‚Äî Instagram, YouTube Shorts).

–í–≤–æ–¥–∏—Ç—å –æ–±–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞: free (2 –≤–∏–¥–µ–æ/—à–∞–≥, 1x/–¥–µ–Ω—å) –∏ premium ($4.99‚Äì$9.99/–º–µ—Å—è—Ü, 5‚Äì7 –≤–∏–¥–µ–æ/—à–∞–≥, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ 6—á).

–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è (EN –æ—Å–Ω–æ–≤–Ω–æ–π, RU/ES –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω—ã).

2. Target Audience (Finalized)
Primary –¶–ê: –í–∞—Ä–∏–∞–Ω—Ç A

–î–µ–º–æ–≥—Ä–∞—Ñ–∏—è: 18‚Äì35 –ª–µ—Ç, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ TikTok.

–ü—Å–∏—Ö–æ–≥—Ä–∞—Ñ–∏—è: —Ö–æ—Ç—è—Ç "—á–∏—Å—Ç—ã–π, –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –±–µ–∑ –º—É—Å–æ—Ä–∞", –Ω–æ –Ω–µ –≥–æ—Ç–æ–≤—ã —Å–∞–º–∏ –∏—Å–∫–∞—Ç—å –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å.

–ë–æ–ª—å: –º—É—Å–æ—Ä –≤ FYP, –ø–æ—Ç–µ—Ä—è –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –ø–æ–∏—Å–∫, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π —Ö–∞–æ—Å.

–†–µ—à–µ–Ω–∏–µ: FYPFixer –¥–∞—ë—Ç –≥–æ—Ç–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –≤–∏–¥–µ–æ.

–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ (8 —à—Ç—É–∫, 5 free + 3 premium):

#	Code	EN	RU	ES	is_premium
1	personal_growth	Personal Growth	–õ–∏—á–Ω–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ	Crecimiento Personal	FALSE
2	entertainment	Entertainment	–†–∞–∑–≤–ª–µ—á–µ–Ω–∏–µ	Entretenimiento	FALSE
3	wellness	Wellness & Lifestyle	–ó–¥–æ—Ä–æ–≤—å–µ –∏ –û–±—Ä–∞–∑ –∂–∏–∑–Ω–∏	Bienestar y Estilo de vida	FALSE
4	creative	Creative & Arts	–¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ –∏ –ò—Å–∫—É—Å—Å—Ç–≤–æ	Creatividad y Arte	FALSE
5	learning	Learning & Education	–û–±—É—á–µ–Ω–∏–µ –∏ –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ	Aprendizaje y Educaci√≥n	FALSE
6	science_tech	Science & Technology	–ù–∞—É–∫–∞ –∏ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è	Ciencia y Tecnolog√≠a	TRUE
7	food	Food & Cooking	–ï–¥–∞ –∏ –ö—É–ª–∏–Ω–∞—Ä–∏—è	Comida y Cocina	TRUE
8	travel	Travel & Adventure	–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è –∏ –ü—Ä–∏–∫–ª—é—á–µ–Ω–∏—è	Viajes y Aventura	TRUE
3. Product Values & Principles (Updated)
Safety & Compliance: Only public TikTok videos, no account access, transparent scraping.

Simplicity: User taps button ‚Üí action completed (watch, like, block, follow, search).

Concrete Value: Not advice, but ready-to-use actions with video links.

AI-Powered: LLM + Vector DB generates recommendations, not manual templates.

Engagement Over Friction: Minimize user thinking; maximize button-tapping.

4. Current Product State (MVP v2)
Implemented:

Landing page (Flask + Jinja2, 3 languages EN/RU/ES).

/api/health ‚Äî health check with DB connectivity.

/api/plan ‚Äî returns plan with 5 steps, but steps still contain generic advice, not video links yet.

Categories table in PostgreSQL with is_premium flag (8 base categories seeded).

Docker Compose infrastructure (web, Postgres 16, Redis 7).

What's missing for v2:

TikTok video scraper (Firecrawl or similar).

step_items table (video links + metadata for each step).

trending_videos table (cache of public trending videos).

user_actions table (tracking: user watched/liked/blocked video).

AI layer (LLM generates: "pick 5 videos for step X").

Vector DB (Qdrant) for similarity search of videos.

UI component to display videos and track completion.

5. Tech Stack (Target, refined)
Backend

Python 3.11 + Flask + Flask-SQLAlchemy.

REST API (/api/plan, /api/plan/{id}/step, /api/plan/{id}/complete-step, /api/recommendations).

Flask-Babel for i18n (UI + Plan content).

Database

PostgreSQL 16 (users, categories, plans, plan_steps, step_items, trending_videos, user_actions).

Redis 7 (cache trending videos, session tokens, rate limits).

AI & Data

TikTok Scraper: Firecrawl.dev or Apify for public trending videos (parse hashtags, metadata).

LLM: Ollama (local, llama3) or OpenAI (fallback/premium).

Vector DB: Qdrant ‚Äî embed and store videos; query by semantic similarity.

Data Pipeline: Scheduled job (n8n or cron) to update trending_videos table every 1‚Äì6 hours per category.

Frontend

Flask templates + vanilla JS + CSS (mobile-first, dark theme).

PWA approach (offline support, installable).

Progressive disclosure: free users see 2 videos/step, premium see 5‚Äì7.

Infrastructure

Docker Compose (local dev): web, Postgres, Redis, Ollama, Qdrant, n8n, Grafana, Prometheus, Nginx.

Production: Hetzner / DigitalOcean + Kubernetes (later).

Observability: Prometheus, Grafana, Loki, Sentry.

Backups: Daily Postgres snapshots to S3-compatible storage.

6. High-Level Architecture (C4 Overview, Updated)
Level 1 ‚Äî System Context

FYPFixer: generates daily checklists with concrete TikTok video actions.

TikTok User / Premium User / Admin interact with FYPFixer.

TikTok Platform: source of video data (scraping public content).

Payment Provider (Stripe): handles premium billing.

Email Service: sends notifications.

Level 2 ‚Äî Containers (Key Update)

Web App (Flask): serve HTML, static files, user interface.

API (Flask REST): /api/plan, /api/plan/{id}/step, /api/recommendations.

AI Orchestrator (n8n): workflow for video recommendation generation (input: category + language ‚Üí output: 5 videos + reasons).

TikTok Scraper (scheduled job): fetch trending videos, enrich metadata, store in trending_videos table.

Data Layer: PostgreSQL, Redis.

Vector DB (Qdrant): semantic search for videos.

Observability: Prometheus, Grafana, Loki, Sentry.

Ingress: Nginx (SSL, rate limiting).

Level 3 ‚Äî Components (Detailed later)

7. Database Schema (v2, Updated)
Existing tables:

users (client_id, language, created_at, updated_at).

categories (code, name_en/ru/es, is_premium).

plans (user_id, category_id, plan_date, language, is_template, title).

plan_steps (plan_id, step_order, action_type, text_en/ru/es).

NEW tables (for video links):

sql
step_items (
  id BIGSERIAL PRIMARY KEY,
  plan_step_id BIGINT FK plans_steps.id,
  video_id VARCHAR(256), -- TikTok video ID
  creator_username VARCHAR(256),
  title TEXT,
  thumbnail_url TEXT,
  video_url TEXT,
  engagement_score FLOAT, -- likes/views ratio for ranking
  reason_text TEXT, -- "High engagement, matches your niche"
  created_at TIMESTAMPTZ
);

trending_videos (
  id BIGSERIAL PRIMARY KEY,
  category_id BIGINT FK categories.id,
  video_id VARCHAR(256) UNIQUE,
  creator_username VARCHAR(256),
  title TEXT,
  hashtags TEXT[], -- array of tags
  views BIGINT,
  likes BIGINT,
  engagement_score FLOAT,
  thumbnail_url TEXT,
  video_url TEXT,
  scraped_at TIMESTAMPTZ,
  expires_at TIMESTAMPTZ -- 24h cache TTL
);

user_actions (
  id BIGSERIAL PRIMARY KEY,
  user_id BIGINT FK users.id,
  plan_step_id BIGINT FK plan_steps.id,
  step_item_id BIGINT FK step_items.id,
  action_type VARCHAR(32), -- "watched", "liked", "blocked", "followed"
  completed_at TIMESTAMPTZ
);
8. API Contracts (v2)
GET /api/plan?lang=en&category=personal_growth

Response:

json
{
  "plan_id": 123,
  "plan_date": "2025-12-07",
  "language": "en",
  "category_code": "personal_growth",
  "category_name": "Personal Growth",
  "steps": [
    {
      "step_id": 1,
      "order": 1,
      "action_type": "watch",
      "text": "Watch 3 high-quality videos on personal development",
      "items": [
        {
          "step_item_id": 101,
          "video_id": "tiktok_abc123",
          "creator": "@motivationcoach",
          "title": "5 Habits to Change Your Life",
          "thumbnail_url": "https://...",
          "video_url": "https://vm.tiktok.com/...",
          "reason": "High engagement, trending in Personal Growth",
          "is_completed": false
        },
        { ... },
        { ... }
      ]
    },
    { "step_id": 2, "order": 2, ... },
    ...
  ],
  "completion_progress": {
    "completed_steps": 0,
    "total_steps": 5,
    "percentage": 0
  }
}
POST /api/plan/{plan_id}/step/{step_id}/complete-action

Request:

json
{
  "step_item_id": 101,
  "action_type": "watched"
}
Response:

json
{
  "success": true,
  "action_recorded": {
    "user_id": 42,
    "step_item_id": 101,
    "action_type": "watched",
    "completed_at": "2025-12-07T14:30:00Z"
  }
}
9. Roles & Responsibilities (Unchanged)
You (founder): Product vision, roadmap, UX testing, deployment decisions.

I (AI): Architecture, code design, implementation, documentation, tooling guidance.

Shared: Git commits, schema design, decision logs.

10. Roadmap (v2, Updated)
Session 2‚Äì3 (Current):

‚úÖ Docker infra (Postgres, Redis, web).

‚úÖ Categories table + seed (8 categories, free/premium).

‚úÖ /api/plan basic implementation (reading from categories).

üîÑ Next: Add step_items table, design TikTok scraper, mock video data.

Session 4‚Äì5:

TikTok public video scraper (Firecrawl/Apify or manual parsing).

Populate trending_videos table with real data.

/api/plan returns actual video links (not mocked).

user_actions table + POST endpoint to track "watched/liked/blocked".

Session 6‚Äì7:

AI layer: LLM generates recommendations ("pick 5 videos for category X, language Y").

Qdrant + vector embeddings for semantic search.

n8n workflow for video recommendation pipeline.

Premium/free tier logic (2 vs 5‚Äì7 videos per step).

Session 8‚Äì9:

UI improvements: video preview cards, progress tracking, completion animations.

Mobile PWA features (offline, installable).

Analytics dashboard (completion rates, engagement, LTV).

Session 10+:

Cloud deployment (Hetzner / DigitalOcean).

Kubernetes setup.

Payment integration (Stripe).

Advanced: multi-language support, creator partnerships, affiliate links.

11. Key Documents (in Repo)
docs/architecture/c4-context.md ‚Äî System Context (textual).

docs/domain-model.md ‚Äî Domain Model (User, Plan, Step, Category, StepItem).

db_schema_v0.sql ‚Äî Initial schema (users, categories, plans, plan_steps).

db_schema_categories_v0.sql ‚Äî Categories table with is_premium.

db_seed_categories_v0.sql ‚Äî 8 base categories seeded.

Dockerfile, docker-compose.yml, .env ‚Äî Infrastructure.

requirements.txt ‚Äî Python dependencies.

app/__init__.py, app/routes/health.py, app/routes/plan.py ‚Äî Flask app.

app/models.py ‚Äî SQLAlchemy models (Category, User, Plan, PlanStep).

12. Environment Setup (Both Locations: [translate:–¥–∞—á–∞] & [translate:–¥–æ–º])
Minimal requirements:

Windows 10/11 (WSL2 support).

Git + GitHub desktop.

VS Code.

Docker Desktop (installed, tested).

Python 3.11+ (for local testing, optional for Docker dev).

Repository:

https://github.com/mefmax/fypfixer.git

Main branch: production-ready code.

All changes: git add + commit + push.

Local paths:

[translate:–¥–∞—á–∞]: C:\Users\mefmax\OneDrive\!My Projects\FYPFixer

[translate:–¥–æ–º]: Same path (OneDrive synced).

Docker commands (standard):

powershell
docker compose up -d
docker compose ps
docker logs fypfixer-web
docker compose build web
docker compose down -v
üéØ Next Immediate Steps
Add step_items table to schema (video links, metadata).

Design TikTok scraper (what service? Firecrawl? manual?).

Mock video data for first 3 categories.

Update /api/plan to return videos instead of text.

Create UI component to display videos + action buttons.