üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ê–ù–ê–õ–ò–ó –ü–†–û–ï–ö–¢–ê FYPFixer
‚ùå –ù–ê–ô–î–ï–ù–´ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –û–®–ò–ë–ö–ò
–û—à–∏–±–∫–∞ #1: app/__init__.py ‚Äî –§–£–ù–ö–¶–ò–Ø –ù–ò–ö–û–ì–î–ê –ù–ï –í–û–ó–í–†–ê–©–ê–ï–¢ app
python
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û (—Å–µ–π—á–∞—Å –≤ —Ñ–∞–π–ª–µ):
def create_app():
    ...
    app.register_blueprint(plan_bp)
    
    @app.route("/")
    def index():
        return render_template("index.html")
    
    return app  # ‚Üê –ù–ê–•–û–î–ò–¢–°–Ø –í–ù–£–¢–†–ò –§–£–ù–ö–¶–ò–ò index()!
    
def get_locale():
    ...
–ü—Ä–æ–±–ª–µ–º–∞: return app –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –í–ù–£–¢–†–ò —Ñ—É–Ω–∫—Ü–∏–∏ index(), –∞ –Ω–µ –≤ –∫–æ–Ω—Ü–µ create_app(). –≠—Ç–æ –∑–Ω–∞—á–∏—Ç create_app() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç None, –∏ –≤ main.py –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è app —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è None.

–†–µ–∑—É–ª—å—Ç–∞—Ç: Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è –≤–æ–æ–±—â–µ!

–û—à–∏–±–∫–∞ #2: –ú–æ–¥–µ–ª–∏ –ù–ï –ò–ú–ü–û–†–¢–ò–†–£–Æ–¢–°–Ø –≤ app/__init__.py
python
# ‚ùå –í —Ñ–∞–π–ª–µ –Ω–µ—Ç:
from app.models import User, Category, Plan, PlanStep, StepItem
–ë–µ–∑ —ç—Ç–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ db.create_all() –Ω–µ –∑–Ω–∞–µ—Ç –æ –º–æ–¥–µ–ª—è—Ö –∏ –Ω–µ —Å–æ–∑–¥–∞—ë—Ç —Ç–∞–±–ª–∏—Ü—ã.

–û—à–∏–±–∫–∞ #3: models.py ‚Äî –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç DEFAULT –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫
python
# ‚ùå –ú–æ–¥–µ–ª–∏ —Ç—Ä–µ–±—É—é—Ç created_at/updated_at, –Ω–æ –Ω–µ—Ç defaults:
created_at = db.Column(db.DateTime(timezone=True), nullable=False)
updated_at = db.Column(db.DateTime(timezone=True), nullable=False)

# –ö–æ–≥–¥–∞ –≤—Å—Ç–∞–≤–ª—è–µ–º –≤ –ë–î ‚Äî –ø–∞–¥–∞–µ—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ –ø–æ–ª—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ, –Ω–æ –Ω–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è
–û—à–∏–±–∫–∞ #4: plan.py ‚Äî hardcoded plan_id=1
python
# ‚ùå –ñ—ë—Å—Ç–∫–æ –∏—â–µ—Ç —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–π –ø–ª–∞–Ω:
plan_steps = PlanStep.query.filter_by(plan_id=1).order_by(PlanStep.step_order).all()

# –ï—Å–ª–∏ –ø–ª–∞–Ω–∞ —Å id=1 –Ω–µ—Ç ‚Üí –ø—É—Å—Ç–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
‚úÖ –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø (–∑–∞–≤—Ç—Ä–∞, –æ–¥–∏–Ω –ø—Ä–æ—Ö–æ–¥)
–®–∞–≥ 1: –ò—Å–ø—Ä–∞–≤–∏—Ç—å app/__init__.py (5 –º–∏–Ω)
–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å return app –≤ –∫–æ–Ω–µ—Ü create_app()

–î–æ–±–∞–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç –º–æ–¥–µ–ª–µ–π –≤ –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞

–®–∞–≥ 2: –ò—Å–ø—Ä–∞–≤–∏—Ç—å models.py (3 –º–∏–Ω)
–î–æ–±–∞–≤–∏—Ç—å default=func.now() –∫–æ –≤—Å–µ–º created_at/updated_at

–®–∞–≥ 3: –°–æ–∑–¥–∞—Ç—å –ß–ò–°–¢–´–ô SQL —Å–∫—Ä–∏–ø—Ç –≤–º–µ—Å—Ç–æ db.create_all() (10 –º–∏–Ω)
–ù–∞–ø–∏—Å–∞—Ç—å schema.sql —Å CREATE TABLE –¥–ª—è –≤—Å–µ—Ö 5 —Ç–∞–±–ª–∏—Ü

–ù–∞–ø–∏—Å–∞—Ç—å seed.sql —Å INSERT –¥–ª—è –¥–µ–º–æ-–¥–∞–Ω–Ω—ã—Ö

–ó–∞–ø—É—Å—Ç–∏—Ç—å –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ db —á–µ—Ä–µ–∑ psql -f schema.sql && psql -f seed.sql

–®–∞–≥ 4: –û–±–Ω–æ–≤–∏—Ç—å plan.py (5 –º–∏–Ω)
–£–±—Ä–∞—Ç—å hardcoded plan_id=1

–°–¥–µ–ª–∞—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é –≤—ã–±–æ—Ä–∫—É –ø–æ category –∏ language

–®–∞–≥ 5: –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å (10 –º–∏–Ω)
docker compose build web

docker compose up -d

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å /api/plan –≤ –±—Ä–∞—É–∑–µ—Ä–µ

üìä –ò–¢–û–ì–û –†–ê–ë–û–¢–´
–í—Ä–µ–º—è: ~30 –º–∏–Ω—É—Ç
–§–∞–π–ª—ã –∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é: 4 (__init__.py, models.py, plan.py, + –Ω–æ–≤—ã–µ schema.sql –∏ seed.sql)
–†–µ–∑—É–ª—å—Ç–∞—Ç: –¢–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–¥—É—Ç—Å—è, –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂—É, /api/plan –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç

–ó–∞–≤—Ç—Ä–∞ –≤ –Ω–∞—á–∞–ª–µ —Å–µ—Å—Å–∏–∏ –Ω–∞—á–Ω—ë–º –∏–º–µ–Ω–Ω–æ —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è __init__.py ‚Äî —ç—Ç–æ –∫–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –≤—Å–µ–≥–æ –æ—Å—Ç–∞–ª—å–Ω–æ–≥–æ.