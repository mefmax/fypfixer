# FYPGlow Architecture v4.2
## Guided Watching Edition â€” Production Ready

**Ğ”Ğ°Ñ‚Ğ°:** 23 Ğ´ĞµĞºĞ°Ğ±Ñ€Ñ 2025
**Ğ’ĞµÑ€ÑĞ¸Ñ:** 4.2
**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:** âœ… Ready for Development
**Changes:** QA fixes, scope reduction, API contracts

---

## ğŸ¯ ĞœĞ¸ÑÑĞ¸Ñ

ĞŸĞ¾Ğ¼Ğ¾Ñ‡ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑĞ¼ **Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾ Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ** ÑĞ²Ğ¾Ñ TikTok Ğ»ĞµĞ½Ñ‚Ñƒ Ğ·Ğ° 5-7 Ğ´Ğ½ĞµĞ¹ Ñ‡ĞµÑ€ĞµĞ· ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğµ, Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ğ¼Ñ‹Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ.

---

## ğŸ”„ ĞšĞ»ÑÑ‡ĞµĞ²Ğ¾Ğµ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ: Guided Watching

### Ğ‘Ñ‹Ğ»Ğ¾ (v1-v3):
```
"ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑˆĞ¸ÑÑŒ Ğ½Ğ° 3 Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ğ° Ğ² ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸ Fitness"
â†’ Ğ®Ğ·ĞµÑ€ ÑĞ°Ğ¼ Ğ¸Ñ‰ĞµÑ‚, Ğ½Ğµ Ğ·Ğ½Ğ°ĞµÑ‚ Ğ½Ğ° ĞºĞ¾Ğ³Ğ¾
â†’ Ğ¡Ğ»Ğ°Ğ±Ñ‹Ğ¹ ÑÑ„Ñ„ĞµĞºÑ‚ Ğ½Ğ° Ğ°Ğ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼
â†’ Ğ®Ğ·ĞµÑ€ ÑƒÑ…Ğ¾Ğ´Ğ¸Ñ‚ Ñ‡ĞµÑ€ĞµĞ· 2 Ğ´Ğ½Ñ
```

### Ğ¡Ñ‚Ğ°Ğ»Ğ¾ (v4+):
```
"ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€Ğ¸ @chriswillx Ğ´Ğ¾ ĞºĞ¾Ğ½Ñ†Ğ° Ğ¸ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑˆĞ¸ÑÑŒ"
â†’ ĞšĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğ¹ Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚ Ñ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸ĞµĞ¼
â†’ ĞšĞ½Ğ¾Ğ¿ĞºĞ° "ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ² TikTok"
â†’ Ğ¡Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ ÑÑ„Ñ„ĞµĞºÑ‚ (watch time!)
â†’ Ğ®Ğ·ĞµÑ€ Ğ²Ğ¸Ğ´Ğ¸Ñ‚ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚
```

---

## ğŸ—ï¸ Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ½Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              EXTERNAL SERVICES                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚   TikTok    â”‚    â”‚   Apify     â”‚    â”‚  Anthropic  â”‚                     â”‚
â”‚  â”‚   OAuth     â”‚    â”‚  Scraper    â”‚    â”‚   Claude    â”‚                     â”‚
â”‚  â”‚             â”‚    â”‚  (Schedule) â”‚    â”‚   Haiku     â”‚                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚         â”‚                  â”‚                  â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                  â”‚                  â”‚
          â”‚ OAuth            â”‚ Webhook          â”‚ API
          â”‚ Callback         â”‚ (accounts)       â”‚ (filter/enrich)
          â–¼                  â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                               BACKEND (Flask)                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ Auth Service â”‚ â”‚   Curated    â”‚ â”‚  AI Service  â”‚ â”‚  Analytics   â”‚       â”‚
â”‚  â”‚              â”‚ â”‚   Service    â”‚ â”‚              â”‚ â”‚   Service    â”‚       â”‚
â”‚  â”‚ â€¢ OAuth      â”‚ â”‚ â€¢ Import     â”‚ â”‚ â€¢ Filter     â”‚ â”‚ â€¢ Events     â”‚       â”‚
â”‚  â”‚ â€¢ JWT        â”‚ â”‚ â€¢ Get/Rank   â”‚ â”‚ â€¢ Enrich     â”‚ â”‚ (MVP: 3)     â”‚       â”‚
â”‚  â”‚ â€¢ Sessions   â”‚ â”‚ â€¢ Anti-repeatâ”‚ â”‚ â€¢ Motivate   â”‚ â”‚              â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚         â”‚                â”‚                â”‚                â”‚                â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                   â”‚                                         â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚                    â”‚      Plan Generator         â”‚                          â”‚
â”‚                    â”‚  â€¢ Guided Watching          â”‚                          â”‚
â”‚                    â”‚  â€¢ Streak calculation       â”‚                          â”‚
â”‚                    â”‚  â€¢ Daily limit (1 plan)     â”‚                          â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                   â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                          REDIS (Cache)                              â”‚   â”‚
â”‚  â”‚  â€¢ categories (TTL: 1h)                                             â”‚   â”‚
â”‚  â”‚  â€¢ curated:{category} (TTL: 10min)                                  â”‚   â”‚
â”‚  â”‚  â€¢ plan:{user_id}:{date} (TTL: 24h)                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                   â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                         PostgreSQL                                  â”‚   â”‚
â”‚  â”‚  users | categories | curated_accounts | user_shown_accounts        â”‚   â”‚
â”‚  â”‚  plans | plan_step_completions | analytics_events                   â”‚   â”‚
â”‚  â”‚  apify_import_logs                                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”‚ REST API
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              FRONTEND (React)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”‚ HTTPS (Cloudflare)
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            INFRASTRUCTURE                                    â”‚
â”‚  Nginx | Docker Compose | Let's Encrypt | Cloudflare                        â”‚
â”‚  VPS: 149.28.235.95 (Vultr) | Domains: fypglow.com, fypglow.app            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“œ API Contracts (NEW in v4.2)

### TypeScript Interfaces

```typescript
// ============================================
// PLAN TYPES
// ============================================

interface CuratedAccount {
  id: string;
  username: string;
  display_name: string;
  bio: string | null;
  description_ru: string | null;  // AI-generated
  follower_count: number;
  avatar_url: string | null;
  profile_url: string;            // https://tiktok.com/@username
}

interface PlanStep {
  order: number;                  // 1, 2, 3
  type: 'detox' | 'watch' | 'browse';
  title: string;
  description: string;
  instruction: string | null;
  duration_minutes: number;
  target_count?: number;          // Ğ´Ğ»Ñ detox: ÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ²Ğ¸Ğ´ĞµĞ¾
  accounts?: CuratedAccount[];    // Ğ´Ğ»Ñ watch: ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ğ¾Ğ²
  completed: boolean;
}

interface GuidedPlanResponse {
  id: string;
  steps: PlanStep[];
  total_duration_minutes: number;
  completion_rate: number;        // 0.0 - 1.0
  motivation: {
    greeting: string;             // "ĞŸÑ€Ğ¸Ğ²ĞµÑ‚! Ğ“Ğ¾Ñ‚Ğ¾Ğ² Ğ¿Ñ€Ğ¾ĞºĞ°Ñ‡Ğ°Ñ‚ÑŒ Ğ»ĞµĞ½Ñ‚Ñƒ? ğŸ”¥"
    tip: string;                  // "Ğ”Ğ¾ÑĞ¼Ğ°Ñ‚Ñ€Ğ¸Ğ²Ğ°Ğ¹ Ğ²Ğ¸Ğ´ĞµĞ¾ Ğ´Ğ¾ ĞºĞ¾Ğ½Ñ†Ğ°..."
    encouragement: string;        // "Ğ¢Ñ‹ Ğ½Ğ° 3-Ğ´Ğ½ĞµĞ²Ğ½Ğ¾Ğ¼ streak!"
  };
  streak: {
    current: number;
    best: number;
  };
  generated_at: string;           // ISO timestamp
}

interface StepCompletionRequest {
  time_spent_seconds?: number;    // optional: ÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸ Ğ¿Ğ¾Ñ‚Ñ€Ğ°Ñ‚Ğ¸Ğ»
}

interface StepCompletionResponse {
  success: boolean;
  step_order: number;
  plan_completion_rate: number;   // Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»Ñ‘Ğ½Ğ½Ñ‹Ğ¹
  streak_updated: boolean;
}

// ============================================
// ANALYTICS TYPES (MVP: Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ 3 ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ)
// ============================================

type AnalyticsEventType =
  | 'plan_generated'           // Ğ¿Ğ»Ğ°Ğ½ ÑĞ¾Ğ·Ğ´Ğ°Ğ½
  | 'step_completed'           // ÑˆĞ°Ğ³ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½
  | 'account_opened';          // Ğ½Ğ°Ğ¶Ğ°Ğ» "ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ² TikTok"

interface AnalyticsEvent {
  type: AnalyticsEventType;
  data?: {
    step_order?: number;
    step_type?: string;
    account_id?: string;
    account_username?: string;
  };
}
```

---

## ğŸ”Œ API Endpoints v4.2

### Auth
```
POST /api/auth/tiktok              # Initiate OAuth
GET  /api/auth/tiktok/callback     # OAuth callback
GET  /api/auth/me                  # Current user
POST /api/auth/logout              # Logout
```

### Categories
```
GET  /api/categories               # All categories (cached)
POST /api/categories/select        # User selects categories
     Body: { category_ids: string[] }
```

### Plan âš ï¸ UNIFIED IN v4.2
```
GET  /api/plan/guided
     # Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ Ğ¿Ğ»Ğ°Ğ½ Ğ½Ğ° ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ (ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ ĞµÑĞ»Ğ¸ Ğ½ĞµÑ‚)
     # ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸ Ğ±ĞµÑ€ÑƒÑ‚ÑÑ Ğ¸Ğ· user.selected_categories
     Response: GuidedPlanResponse

POST /api/plan/step/:order/complete    # â† unified: Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ order (1,2,3)
     Body: StepCompletionRequest
     Response: StepCompletionResponse

GET  /api/plan/history
     Query: ?days=7
     Response: { plans: [...], streak_current, streak_best }
```

### Curated (Internal)
```
POST /api/curated/import           # Webhook from Apify
GET  /api/curated/accounts/:slug   # Get accounts by category
GET  /api/curated/stats            # Import stats
```

### Analytics (MVP: simplified)
```
POST /api/analytics/event
     Body: AnalyticsEvent
```

### Health
```
GET  /api/health                   # Basic health
GET  /api/health/ready             # Dependencies check
```

---

## ğŸ§­ Onboarding Flow (SIMPLIFIED in v4.2)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           USER JOURNEY (MVP)                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1ï¸âƒ£ LANDING PAGE
   â”‚  "ĞĞ°Ğ´Ğ¾ĞµĞ»Ğ¾ Ğ»Ğ¸ÑÑ‚Ğ°Ñ‚ÑŒ Ğ¼ÑƒÑĞ¾Ñ€ Ğ² TikTok?"
   â”‚  CTA: "ĞĞ°Ñ‡Ğ°Ñ‚ÑŒ Ğ±ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ğ¾"
   â–¼
2ï¸âƒ£ TIKTOK OAUTH
   â”‚  Ğ ĞµĞ´Ğ¸Ñ€ĞµĞºÑ‚ â†’ TikTok â†’ Callback
   â”‚  Backend ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ user + JWT
   â–¼
3ï¸âƒ£ CATEGORY SELECTION
   â”‚  "Ğ§Ñ‚Ğ¾ Ñ…Ğ¾Ñ‡ĞµÑˆÑŒ Ğ²Ğ¸Ğ´ĞµÑ‚ÑŒ Ğ² Ğ»ĞµĞ½Ñ‚Ğµ?"
   â”‚  Ğ’Ñ‹Ğ±Ğ¾Ñ€ 1-3 ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¹
   â–¼
4ï¸âƒ£ WELCOME MODAL (Ğ²Ğ¼ĞµÑÑ‚Ğ¾ 7-step tutorial)
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  â”‚  ğŸ¯ ĞšĞ°Ğº ÑÑ‚Ğ¾ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚                   â”‚
   â”‚  â”‚                                        â”‚
   â”‚  â”‚  1. ĞœÑ‹ Ğ´Ğ°Ñ‘Ğ¼ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ´Ğ°Ğ½Ğ¸Ñ         â”‚
   â”‚  â”‚  2. Ğ¢Ñ‹ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑˆÑŒ Ğ¸Ñ… Ğ² TikTok          â”‚
   â”‚  â”‚  3. Ğ—Ğ° 5-7 Ğ´Ğ½ĞµĞ¹ Ğ»ĞµĞ½Ñ‚Ğ° Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑÑ        â”‚
   â”‚  â”‚                                        â”‚
   â”‚  â”‚  [ĞŸĞ¾Ğ½ÑÑ‚Ğ½Ğ¾, Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°ĞµĞ¼!]                  â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â–¼
5ï¸âƒ£ FIRST DAILY PLAN
   â”‚  Ğ¡Ñ€Ğ°Ğ·Ñƒ Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼ Ğ¿Ğ»Ğ°Ğ½ Ñ 3 ÑˆĞ°Ğ³Ğ°Ğ¼Ğ¸
   â–¼
6ï¸âƒ£ EXECUTION & DAILY RETURN
```

**Email/Push:** ĞÑ‚Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¾ Ğ½Ğ° v5 (Ğ¿Ğ¾ÑĞ»Ğµ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ğ¸ retention).

---

## ğŸ“Š Feedback Loop & Completion

### Ğ¤Ğ¸Ğ»Ğ¾ÑĞ¾Ñ„Ğ¸Ñ: Trust but Verify (Lite)

- Ğ®Ğ·ĞµÑ€ ÑĞ°Ğ¼ Ğ¾Ñ‚Ğ¼ĞµÑ‡Ğ°ĞµÑ‚ ÑˆĞ°Ğ³Ğ¸ ĞºĞ°Ğº Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ½Ñ‹Ğµ
- ĞœÑ‹ Ğ»Ğ¾Ğ³Ğ¸Ñ€ÑƒĞµĞ¼ Ğ´Ğ»Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ¸
- ĞĞµ Ğ¿Ñ‹Ñ‚Ğ°ĞµĞ¼ÑÑ Ğ²ĞµÑ€Ğ¸Ñ„Ğ¸Ñ†Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ (Ğ½ĞµÑ‚ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ° Ğº TikTok)

### Ğ§Ñ‚Ğ¾ Ğ»Ğ¾Ğ³Ğ¸Ñ€ÑƒĞµĞ¼

```sql
INSERT INTO plan_step_completions (
    user_id, plan_id, step_order, step_type,
    shown_accounts,           -- UUID[] Ğ´Ğ»Ñ watch ÑˆĞ°Ğ³Ğ°
    completed_at,
    time_spent_seconds
);
```

### Streak Policy

```
Ğ”ĞµĞ½ÑŒ completed = Ñ…Ğ¾Ñ‚Ñ Ğ±Ñ‹ 1 ÑˆĞ°Ğ³ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½
Streak = Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ´Ğ½Ğ¸ Ñ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒÑ
Grace period: Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¿Ñ€Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ, streak ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ÑÑ Ğ´Ğ¾ Ğ·Ğ°Ğ²Ñ‚Ñ€Ğ°
```

---

## â° Apify Scheduling

### Ğ¡Ñ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ: Apify-native scheduling

```
Schedule: Every Sunday 03:00 UTC
Actor: clockworks/tiktok-scraper
Categories: 12 Ğ·Ğ°Ğ´Ğ°Ñ‡ (Ğ¿Ğ¾ Ğ¾Ğ´Ğ½Ğ¾Ğ¹ Ğ½Ğ° ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ)
On Success â†’ POST /api/curated/import
On Failure â†’ POST /api/curated/import-failed (Ğ»Ğ¾Ğ³Ğ¸Ñ€ÑƒĞµĞ¼)
```

### Error Handling

```python
# Ğ¢Ñ€Ğ¸ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ñ:
1. Success      â†’ import all, AI enrich
2. AI Failed    â†’ import without AI, quality_score = 0.5
3. Apify Failed â†’ log error, alert if 3+ failures
```

---

## ğŸ¯ Quality Score

### Ğ¤Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ° v1

```python
quality_score = (
    followers_score(0-0.3) +      # log scale, cap 10M
    ai_relevance(0-0.4) +          # Ğ¾Ñ‚ Claude
    freshness(0.1) +               # placeholder
    manual_boost(0-0.1)            # admin override
)
# Range: 0.0 - 1.0
# Default without AI: 0.5
```

### Selection Algorithm

```sql
SELECT * FROM curated_accounts
WHERE category_id = ANY(user_categories)
  AND is_active = true
  AND quality_score >= 0.4
  AND id NOT IN (shown in last 7-14 days)
ORDER BY quality_score * 0.7 + RANDOM() * 0.3 DESC
LIMIT 4;
```

---

## ğŸ”„ Anti-Repeat Logic

| Action | Cooldown |
|--------|----------|
| followed (self-reported) | Never show again |
| opened / completed | 14 days |
| shown / skipped | 7 days |

---

## ğŸ¤– AI Fallback

| Scenario | Action |
|----------|--------|
| AI down on import | Import all, quality_score=0.5, is_ai_enriched=false |
| AI partial failure | Process successful, skip failed |
| AI down on plan | Use precomputed description_ru, default motivation |

**Default Motivation:**
```python
{
    "greeting": "ĞŸÑ€Ğ¸Ğ²ĞµÑ‚! Ğ’Ğ¾Ñ‚ Ñ‚Ğ²Ğ¾Ğ¹ Ğ¿Ğ»Ğ°Ğ½ Ğ½Ğ° ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ ğŸ”¥",
    "tip": "Ğ”Ğ¾ÑĞ¼Ğ°Ñ‚Ñ€Ğ¸Ğ²Ğ°Ğ¹ Ğ²Ğ¸Ğ´ĞµĞ¾ Ğ´Ğ¾ ĞºĞ¾Ğ½Ñ†Ğ° â€” Ğ³Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ ÑĞ¸Ğ³Ğ½Ğ°Ğ» Ğ´Ğ»Ñ Ğ°Ğ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼Ğ°.",
    "encouragement": "ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ Ğ¿Ñ€Ğ¸Ğ±Ğ»Ğ¸Ğ¶Ğ°ĞµÑ‚ Ñ‚ĞµĞ±Ñ Ğº Ğ¸Ğ´ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¹ Ğ»ĞµĞ½Ñ‚Ğµ!"
}
```

---

## ğŸš€ Caching Strategy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  REDIS KEYS                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  categories              TTL: 1 hour                                        â”‚
â”‚  curated:{slug}          TTL: 10 minutes                                    â”‚
â”‚  plan:{user_id}:{date}   TTL: 24 hours                                      â”‚
â”‚  rate_limit:{ip}         TTL: 1 minute                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Fallback: Ğ•ÑĞ»Ğ¸ Redis Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½ â†’ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ Ğ¸Ğ´ÑƒÑ‚ Ğ² DB Ğ½Ğ°Ğ¿Ñ€ÑĞ¼ÑƒÑ.
          Ğ›Ğ¾Ğ³Ğ¸Ñ€ÑƒĞµĞ¼ warning, ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Ğ¿Ñ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ°ĞµÑ‚ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ.
```

---

## ğŸ“ˆ Analytics (MVP Scope)

### 3 Event Types (Ğ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ Ğ´Ğ»Ñ MVP)

```python
class EventType(Enum):
    PLAN_GENERATED = "plan_generated"
    STEP_COMPLETED = "step_completed"
    ACCOUNT_OPENED = "account_opened"
```

### Key Metrics (SQL queries)

```sql
-- D7 Retention
-- Plan Completion Rate
-- Average steps per day
```

**Deferred to v5:** Full 10-event taxonomy, Sentry, dashboards.

---

## ğŸ—„ï¸ Database Schema v4.2

### Plans Table (Ñ ĞºĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸ĞµĞ¼ Ğ¿Ñ€Ğ¾ JSONB)

```sql
CREATE TABLE plans (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    category_ids UUID[] NOT NULL,

    -- steps: Ğ¼Ğ°ÑÑĞ¸Ğ² PlanStep Ğ¾Ğ±ÑŠĞµĞºÑ‚Ğ¾Ğ²
    -- Format: [
    --   { "order": 1, "type": "detox", "title": "...", "target_count": 15, ... },
    --   { "order": 2, "type": "watch", "accounts": [...], ... },
    --   { "order": 3, "type": "browse", ... }
    -- ]
    steps JSONB NOT NULL,

    total_duration_minutes INTEGER,
    completion_rate FLOAT DEFAULT 0,

    -- AI-generated motivation texts
    motivation JSONB,  -- { greeting, tip, encouragement }

    created_at TIMESTAMP DEFAULT NOW(),
    completed_at TIMESTAMP
);

CREATE INDEX idx_plans_user_date ON plans(user_id, DATE(created_at) DESC);
```

### ĞŸĞ¾Ğ»Ğ½Ğ°Ñ ÑÑ…ĞµĞ¼Ğ° (Ğ¾ÑÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹)

```sql
-- Users
CREATE TABLE users (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    tiktok_id VARCHAR(100) UNIQUE NOT NULL,
    display_name VARCHAR(200),
    avatar_url TEXT,
    selected_categories UUID[] DEFAULT '{}',
    streak_current INTEGER DEFAULT 0,
    streak_best INTEGER DEFAULT 0,
    onboarding_completed BOOLEAN DEFAULT false,
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

-- Categories
CREATE TABLE categories (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    slug VARCHAR(50) UNIQUE NOT NULL,
    name VARCHAR(100) NOT NULL,
    emoji VARCHAR(10),
    description TEXT,
    hashtags TEXT[],
    is_premium BOOLEAN DEFAULT false,
    display_order INTEGER DEFAULT 0
);

-- Curated Accounts
CREATE TABLE curated_accounts (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    tiktok_username VARCHAR(100) UNIQUE NOT NULL,
    category_id UUID REFERENCES categories(id),
    display_name VARCHAR(200),
    follower_count INTEGER DEFAULT 0,
    bio TEXT,
    avatar_url TEXT,
    profile_url TEXT GENERATED ALWAYS AS ('https://www.tiktok.com/@' || tiktok_username) STORED,
    description_ru TEXT,
    quality_score FLOAT DEFAULT 0.5,
    manual_boost FLOAT DEFAULT 0,
    is_active BOOLEAN DEFAULT true,
    is_ai_enriched BOOLEAN DEFAULT false,
    source VARCHAR(20) DEFAULT 'apify',
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_curated_category_score ON curated_accounts(category_id, quality_score DESC)
    WHERE is_active = true;

-- User Shown Accounts
CREATE TABLE user_shown_accounts (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    account_id UUID NOT NULL REFERENCES curated_accounts(id) ON DELETE CASCADE,
    plan_id UUID REFERENCES plans(id),
    shown_at TIMESTAMP DEFAULT NOW(),
    action_taken VARCHAR(20) DEFAULT 'shown',  -- shown, opened, completed, followed, skipped

    UNIQUE(user_id, account_id, DATE(shown_at))
);

CREATE INDEX idx_shown_user_recent ON user_shown_accounts(user_id, shown_at DESC);

-- Plan Step Completions
CREATE TABLE plan_step_completions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    plan_id UUID NOT NULL REFERENCES plans(id) ON DELETE CASCADE,
    step_order INTEGER NOT NULL,
    step_type VARCHAR(20) NOT NULL,
    shown_accounts UUID[],
    completed_at TIMESTAMP DEFAULT NOW(),
    time_spent_seconds INTEGER,

    UNIQUE(plan_id, step_order)
);

-- Analytics Events (MVP: 3 types)
CREATE TABLE analytics_events (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id),
    event_type VARCHAR(50) NOT NULL,
    event_data JSONB DEFAULT '{}',
    created_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_events_user ON analytics_events(user_id, created_at DESC);

-- Apify Import Logs
CREATE TABLE apify_import_logs (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    category_slug VARCHAR(50) NOT NULL,
    status VARCHAR(20) NOT NULL,
    accounts_received INTEGER DEFAULT 0,
    accounts_imported INTEGER DEFAULT 0,
    accounts_filtered INTEGER DEFAULT 0,
    error_message TEXT,
    started_at TIMESTAMP DEFAULT NOW(),
    completed_at TIMESTAMP
);
```

---

## ğŸ” Environment Variables

```bash
# App
FLASK_ENV=production
SECRET_KEY=xxx
JWT_SECRET_KEY=xxx

# Database
DATABASE_URL=postgresql://user:pass@db:5432/fypglow
POSTGRES_USER=fypglow
POSTGRES_PASSWORD=xxx
POSTGRES_DB=fypglow

# Redis (documented format)
REDIS_URL=redis://:password@redis:6379/0
REDIS_PASSWORD=xxx

# TikTok OAuth
TIKTOK_CLIENT_KEY=xxx
TIKTOK_CLIENT_SECRET=xxx
TIKTOK_REDIRECT_URI=https://fypglow.com/auth/tiktok/callback

# AI
ANTHROPIC_API_KEY=xxx

# CORS
CORS_ORIGINS=https://fypglow.com,https://www.fypglow.com
```

---

## ğŸ“… MVP vs Deferred

### âœ… MVP (v4.2)

- TikTok OAuth
- Category selection
- Guided Watching UI (3 steps)
- Apify integration
- AI enrichment
- Basic analytics (3 events)
- Redis caching
- Welcome modal (1 screen)

### ğŸ“¦ Deferred (v5+)

| Feature | When |
|---------|------|
| Full analytics (10 events) | After launch |
| Sentry integration | After launch |
| Push notifications | After retention validated |
| Email reminders | After retention validated |
| FYP feedback surveys | v5 |
| Admin panel | v5 |
| Premium subscription | v6 |

---

## ğŸ“… Roadmap

### Phase 1: MVP â† ĞœĞ« Ğ—Ğ”Ğ•Ğ¡Ğ¬
- [x] TikTok OAuth
- [x] Category selection
- [ ] Guided Watching UI
- [ ] Apify integration
- [ ] AI enrichment
- [ ] TikTok Web App approval

### Phase 2: Retention (after launch)
- [ ] Sentry monitoring
- [ ] Full analytics
- [ ] Push notifications
- [ ] Streak achievements

### Phase 3: Growth
- [ ] Referral program
- [ ] Premium categories

### Phase 4: Monetization
- [ ] Subscription ($4.99/mo)

---

## âœ… QA Checklist

| # | Requirement | Status |
|---|-------------|--------|
| 1 | Feedback loop | âœ… Trust but verify |
| 2 | Apify scheduling | âœ… Native + error handling |
| 3 | Quality score | âœ… Formula documented |
| 4 | Anti-repeat | âœ… 7-14 day cooldown |
| 5 | AI fallback | âœ… 3 scenarios |
| 6 | Onboarding | âœ… Simplified to modal |
| 7 | Plan refresh | âœ… 1/day policy |
| 8 | Analytics | âœ… MVP: 3 events |
| 9 | Caching | âœ… Redis + fallback |
| 10 | Monitoring | âœ… Health endpoints |
| 11 | TikTok context | âœ… External site + deep links |
| 12 | DB indexes | âœ… Hot-path covered |
| 13 | API contracts | âœ… TypeScript interfaces |
| 14 | Endpoint consistency | âœ… :order unified |

---

**Last Updated:** 23 Ğ´ĞµĞºĞ°Ğ±Ñ€Ñ 2025
**Authors:** PM Opus + Founder + QA Review
**Version:** 4.2 â€” Production Ready ğŸš€
